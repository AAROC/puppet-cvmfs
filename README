
This cvmfs module is designed to install, enable and configure
CvmFS mounts.

For general details on CvmFS see
http://cernvm.cern.ch/portal/filesystem 

To configure cvmfs enable the module

   class {'cvmfs:'}

and then enable individual repositories, optionally with a particular
configuration on each repository. e.g.

   cvmfs::mount{'lhcb.example.org':}
   cvmfs::mount{'atlas.example.org': cvmfs_quota    => 50 }
   cvmfs::mount{'cms.example.org': 
              cvmfs_quota      => 100,
              cvmfs_server_url => 'http://web.example.org/cms.example.ch' 
   }
                                   
The global defaults for all repositories are maintained within
params.pp. This file supports hiera as a data source so use hiera
or change the values in params.pp. These global values 
then end up in /etc/cvmfs/cvmfs.local.

In addition to creating mounts as above the
create_resources('cvmfs::mount',{}) function is enabled also
to allow the mounts to be specified in a hiera yaml file:

   cvmfs::mount:
      atlas.example.ch:
         cvmfs_quota_limit: 10000
      atlas-condb.example.ch:
         {}
      ams.example.ch:
         cvmfs_server_url: http://ams.example.ch/cvmfs/ams.example.ch
 
This will enable these three mount points with the specified options.

Warning
-------
CvmFS supports 3 locations for configuration.
* global defaults - /etc/cvmfs/default.*
* domain settings - /etc/cvmfs/domain.d/*
* repository settings - /etc/cvmfs/config.d/*

This cvmfs module has no knowledge about the 'domain settings'.
It is based on setting defaults for all potential repositories and then 
adding repositories possibly overriding the default values.

As such this module deletes all files in /etc/cvmfs/domain.d/*
since "domain.d" is not managed by this puppet module. Typically
the domain.d files have contained the values for 'CVMFS_PUBLIC_KEY'.
CVMFS_PUBLIC_KEY should be set at the global and/or per repository level.

Todo
----
Write rspec tests.
Support a cvmfs server installation.

License
-------
Apache II License for all files except automaster.aug which is copied from
the http://augeas.net project. The automaster.aug file is LGPL v2+.

Contact
-------
Steve Traylen <steve.traylen@cern.ch>

Support
-------
https://github.com/cvmfs/puppet-cvmfs
